# Game Review Report — 2026-02-17

## 요약

| 항목 | 점수 | 비고 |
|------|------|------|
| 리스크 점수 | **7/10** | 밸런스 붕괴 + 메모리 리스크 + 보안 허점 |
| 성장 잠재력 | **8.5/10** | 콘텐츠 밀도 상위 5%, 독보적 테마 |
| 종합 판정 | **개선 필요** | Critical 이슈 5건 해결 후 배포 권장 |

---

## 1. 즉시 해결 (Critical — from pessimist)

### C-1. 미니언 데미지가 보호막/아머를 완전 무시
- **위치**: `server/game.js:813`
- **문제**: `closestTarget.hp -= m.damage`로 직접 HP를 깎아서 Capacitor 보호막(80HP), Photoresist 실드(40HP), 팀 armor 버프(20%)가 전부 무시됨
- **영향**: Capacitor의 핵심 생존 메커니즘이 미니언전에서 무의미
- **수정**: `_applyDamageToPlayer()`를 호출하도록 변경

### C-2. 미니언 킬 시 XP 손실/lastKilledBy 미처리
- **위치**: `server/game.js:815-820`
- **문제**: 미니언에게 플레이어가 죽을 때 `XP_LOSS_ON_DEATH` 미적용, `lastKilledBy` 미설정
- **영향**: 사망 화면에 킬러 정보 없음, 다른 사망 경로와 일관성 깨짐

### C-3. ADMIN_PASSWORD 기본값이 예측 가능
- **위치**: `server/constants.js:405`
- **문제**: `'semiconwar2026'` — 맵 변경, 이벤트 트리거, 게임 리셋이 가능한 관리자 비밀번호
- **영향**: 배포 시 환경변수 미설정하면 누구나 관리자 권한 획득
- **수정**: 기본값을 랜덤 생성하거나, 환경변수 미설정 시 관리 기능 비활성화

### C-4. Socket.io CORS 완전 개방 + 연결 수 무제한
- **위치**: `server/index.js:15`
- **문제**: `cors: { origin: '*' }`, 동시 접속 제한 없음
- **영향**: 봇 군단으로 서버 부하 유발 가능 (DDoS 취약)

### C-5. player_input 구조 검증 부재
- **위치**: `server/index.js:174-179`
- **문제**: input 객체 구조 미검증, `game.js:101`에서 `player.input = input` 직접 대입
- **영향**: prototype pollution 가능성, 악의적 페이로드 주입

---

## 2. 빠른 개선 (Quick Win — from optimist)

### Q-1. 킬 스트릭 연출 강화
- 연속킬 수에 비례한 피치/볼륨 증가 + "Double Kill!", "Triple Kill!" 텍스트
- `main.js`의 `sessionKills` 카운터가 이미 있음 → 조건문 추가만으로 구현
- **난이도: 쉬움 | 임팩트: 높음**

### Q-2. 미니맵에 보스 위치/HP 아이콘 추가
- `drawMinimap()`에 보스 위치 점 + HP 비율 색상 추가
- 전략적 판단 크게 개선
- **난이도: 쉬움 | 임팩트: 높음**

### Q-3. 셀 점령 진행도 미니맵 표시
- 분쟁 지점이 한눈에 보이면 전략적 이동 판단 크게 개선
- **난이도: 쉬움 | 임팩트: 높음**

### Q-4. 보스 처치 후 팀 전체 화면 테두리 글로우
- 보스 킬 시 팀 색상으로 캔버스 테두리가 2초간 빛나는 효과
- 팀 일체감 극대화
- **난이도: 쉬움 | 임팩트: 중간**

### Q-5. 사망 화면에 "복수 대상" 하이라이트
- `lastKilledBy` 데이터 이미 있음 → 리스폰 후 미니맵 특별 마커 + 복수 XP 보너스
- **난이도: 보통 | 임팩트: 높음**

### Q-6. 데일리 챌린지 프레임워크
- `constants.js`에 DAILY_MODIFIERS 추가, 서버 시작 시 날짜 기반 선택
- "EUV 없는 날", "보스 2배 HP" 등 → 리플레이 가치 급상승
- **난이도: 보통 | 임팩트: 매우 높음**

---

## 3. 다음 패치 권장사항

### 수정 사항 (from pessimist)

| # | 이슈 | 심각도 | 상세 |
|---|------|--------|------|
| W-1 | O(N^2) 충돌 검사 | Warning | `_checkBulletCollisions`에서 매 총알마다 전 엔티티 순회. 20명+50미니언+40중립몹 시 프레임 드랍. Spatial Hashing 도입 필요 |
| W-2 | 스냅샷에 mapConfig 매틱 전송 | Warning | 불변 데이터를 20Hz로 반복 전송. 접속 시 1회만 전송으로 변경 |
| W-3 | 봇 AI가 Tier 3 진화 미지원 | Warning | 봇은 영원히 cap/rep에 머물러 후반 인간(Tier 3)에 압도적 열세 |
| W-4 | neutralMobs 배열 `_cleanDead()` 누락 | Warning | 죽은 중립몹 객체가 배열에 계속 쌓임 → 메모리 선형 증가 |
| W-5 | 총알 피격 시 Photoresist 실드 미적용 | Warning | `_checkBulletCollisions`에서 보호막만 처리, Photoresist 실드 건너뜀. `_applyDamageToPlayer`와 중복 코드 |
| W-6 | 라운드 리셋 시 minions/bullets/pickups 미초기화 | Warning | 이전 라운드 엔티티 잔존 |
| W-7 | uncaughtException 후 프로세스 미종료 | Suggestion | Node.js 공식 권장: uncaughtException 후 반드시 `process.exit()` |
| W-8 | 해저드 존이 보스방에 스폰 | Suggestion | 보스전 접근 자체를 차단할 수 있음 |
| W-9 | 뷰포트 밖 렌더링 | Suggestion | drawGrid, drawTriBusMap이 전체 맵을 매 프레임 그림. 뷰포트 컬링 필요 |

### 추가 기능 (from optimist)

| # | 기능 | 노력 | 임팩트 | 우선순위 |
|---|------|------|--------|----------|
| F-1 | JSON 기반 주간 리더보드 | 중 | 매우 높음 | P1 |
| F-2 | 3번째 맵 (DRAM Array) | 중 | 높음 | P1 |
| F-3 | 이모트/핑 시스템 확장 (맵 마킹) | 낮음 | 높음 | P1 |
| F-4 | 튜토리얼 모드 (봇 전용 연습방) | 중 | 높음 | P1 |
| F-5 | 시즌제 + 칭호/테두리 보상 | 높음 | 매우 높음 | P2 |
| F-6 | 관전 모드 개선 (자유 카메라) | 낮음 | 중 | P2 |
| F-7 | 리플레이 녹화/공유 | 높음 | 중 | P3 |

---

## 4. 밸런스 상태

### DPS/TTK 분석 (레벨 1, 버프 없음)

| 클래스 | 공격 타입 | 이론 DPS | 실전 DPS | HP (EHP) | 사거리 |
|--------|-----------|----------|----------|----------|--------|
| RESISTOR | 단발 | 28.6 | 28.6 | 120 | 200 |
| CAPACITOR | 3오비탈 | 77.1 | ~38-51 | 250+80실드=**330** | 140(궤도) |
| REPEATER | 연사 | 46.7 | 46.7 | 110 | 280 |
| INDUCTOR | 4오비탈+인력 | 146.8 | ~73-110 | 280+60실드=**340** | 180+자기장 |
| TRANSFORMER | 2오비탈+오라 | 37.5 | 37.5 | 300+100실드=**400** | 120+오라 |
| OSCILLATOR | 3연발 | 19.7 | 19.7 | 130 | 300 |
| AMPLIFIER | 거리비례 | 22.5~45 | ~30 | 100 | 400 |

### 밸런스 판정

| 항목 | 판정 | 근거 |
|------|------|------|
| **INDUCTOR** | **OP (과강)** | DPS 73-110 + HP 340 + 자기장 인력(도주 불가). Tier 3 중 압도적. RESISTOR를 1.6초에 처치 |
| **OSCILLATOR** | **약함** | DPS 19.7은 Tier 1 RESISTOR(28.6)보다 낮음. Tier 3인데 가장 약한 화력 |
| **TRANSFORMER** | **팀 의존** | DPS 37.5로 솔로 무력. 아군 없으면 대부분의 클래스에 패배 |
| **AMPLIFIER** | **시스템 충돌** | 오토 타겟(280px)과 최적 거리(400px) 불일치. 자동전투에서 거리 조절 불가 |
| 셀 터렛 | 적정 | HP 1200, ATK 55, range 320. 혼자 공략 어렵고 2인 이상 필요 — 의도된 설계 |
| 보스 난이도 | 적정 | HP 400-600, 다양한 공격 패턴. 2-3인 파티로 적절한 난이도 |
| 중립몹 경제 | 적정 | photon 3XP, dopant 12XP, alpha 35XP. Tier 2까지 중립몹 파밍 7-10마리 |

### XP 경제 분석

| 경로 | Tier 2 (20 XP) | Tier 3 (200 XP) | 판정 |
|------|-----------------|------------------|------|
| 미니언 파밍 | ~7초 | ~74초 | **너무 빠름** — 미니언 2마리로 Tier 2 도달 |
| 플레이어 킬 | 1킬 (50XP) | 4킬 | 적정 |
| 중립몹 파밍 | ~3-4마리 | 풀파밍 불가 (리스폰 대기) | 적정 |
| **보스 처치** | 0 XP | 0 XP | **문제** — 보스 킬에 개인 XP 보상 없음 |

---

## 5. 스노우볼 위험도: 8/10

### 스노우볼 루프
```
셀 점령 → 적 미니언/플레이어 자동 공격 → 적 XP 손실 + 리스폰 대기
→ 승리팀 안전 파밍 → 레벨 격차 확대 → 더 쉬운 셀 점령 → 반복
```

### 근거
- 레벨 10 vs 레벨 1: HP 1.72배, DMG 1.45배 → 유효 전투력 ~2.5배 차이
- 보스 버프(DMG +30%)가 앞서나가는 팀에 집중 (라스트 히트 기반)
- **컴백 메커니즘 전무**: 언더독 보정, 지는 팀 버프, 러버밴드 시스템 없음

### 컴백 메커니즘 제안
1. **언더독 버프**: 셀 보유 수 차이에 비례한 약팀 XP/DMG 보너스 (10-20%)
2. **보스 스폰 위치 보정**: 불리한 팀 쪽으로 보스 스폰 위치 편향
3. **셀 재건 가속**: 불리한 팀의 셀 재건 시간 단축 (3초 → 2초)
4. **보스 킬 XP 보상 추가**: 참여자 전원에게 XP 분배

---

## 6. 강점 TOP 5

### 1. 반도체 테마의 완벽한 게임-서사 통합
클래스명(RESISTOR, CAPACITOR...), 맵(Tri-Bus Circuit), 장애물(MOSFET, GND), 보스(NVIDIA, TSMC) 등 **모든 게임 요소가 반도체 용어**로 통일. 회로 도식 렌더링은 실제 EDA 소프트웨어 수준.

### 2. MOBA 수준의 전략적 깊이
셀 도미네이션 + 3레인 미니언 + 보스 라스트히트 + 백도어 보호 + 오버히트 시스템. 캐주얼 .io 게임에서 이 수준의 전략 레이어링은 매우 드뭄.

### 3. 7개 클래스 3티어 진화 트리
탱커/딜러/서포터 역할 분담이 명확하며, 진화 선택의 쾌감이 리플레이 가치를 높임. diep.io의 클래스 시스템 + LoL의 역할군 개념.

### 4. 실시간 주식 데이터 연동 (독보적 메타게임)
삼성/SK 주가 등락 → 인게임 팀 버프. 4단계 폴백 프로바이더 체인, 금융 규정 준수, KRX 공휴일 체크까지. **.io 장르에서 전례 없는 실세계 연결.**

### 5. 교과서적 서버 권위 아키텍처
60Hz 물리 + 20Hz 스냅샷 + 클라이언트 보간. 모든 로직이 서버에서 실행되어 치트 방지가 구조적으로 보장.

---

## 7. 로드맵 제안

### 단기 (1주)
- [ ] Critical 5건 수정 (C-1~C-5)
- [ ] INDUCTOR DPS 너프 (오브 데미지 22→17 또는 히트쿨다운 0.6→0.9초)
- [ ] OSCILLATOR 버프 (DPS 19.7→30 수준으로 조정)
- [ ] 보스 킬 XP 보상 추가
- [ ] 미니맵 보스/셀 진행도 표시
- [ ] 킬 스트릭 연출

### 중기 (1달)
- [ ] Warning 이슈 해결 (W-1~W-6)
- [ ] 언더독 컴백 메커니즘 도입
- [ ] JSON 기반 주간 리더보드
- [ ] 3번째 맵 (DRAM Array)
- [ ] 튜토리얼 모드
- [ ] 데일리 챌린지 시스템

### 장기 (3달)
- [ ] 시즌제 + 칭호 보상
- [ ] Spatial Hashing 충돌 최적화
- [ ] 스냅샷 크기 최적화 (mapConfig 분리, 델타 압축)
- [ ] 관전 모드 고도화
- [ ] 8번째 클래스 추가

---

## 8. 콘텐츠 볼륨

| 카테고리 | 수량 |
|----------|------|
| 엔티티 종류 | 9개 (Player, Bullet, Minion, Monster, BossBullet, BossDrone, Pickup, CellTurret, NeutralMob) |
| 맵 | 2개 |
| 클래스 | 7개 (3티어 진화 트리) |
| 아이템/픽업 | 5종 |
| 보스 | 5종 (고유 공격 패턴) |
| 중립 몹 | 3종 |
| 셀 터렛 | 17개 (맵별 9+8) |
| 포탈/커넥터 | 10개 |
| 해저드 존 | 동적 (최대 2개) |
| 버프 종류 | 7종 (팀 4 + 개인 3) |
| 교육 툴팁 | 27개 |
| **판정** | **매우 풍부** — .io 장르 상위 5% |

---

*리뷰 수행: critic-pessimist + critic-optimist 에이전트*
*날짜: 2026-02-17*
